{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\YKB\\\\Desktop\\\\AKO_nft\\\\src\\\\components\\\\pages\\\\Create.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport FormData from 'form-data';\n\nvar Create =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Create, _Component);\n\n  _createClass(Create, [{\n    key: \"handleFile\",\n    value: function () {\n      var _handleFile = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var formData, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, value, API_KEY, API_SECRET, url, response;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log('starting'); // initialize the form data\n\n                formData = new FormData(); // append the file form data to \n\n                formData.append('file', this.state.file); //formData value 확인\n\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context.prev = 6;\n\n                for (_iterator = formData.values()[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  value = _step.value;\n                  console.log(value);\n                } // call the keys from .env\n\n\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](6);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 14:\n                _context.prev = 14;\n                _context.prev = 15;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 17:\n                _context.prev = 17;\n\n                if (!_didIteratorError) {\n                  _context.next = 20;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 20:\n                return _context.finish(17);\n\n              case 21:\n                return _context.finish(14);\n\n              case 22:\n                API_KEY = '23f6b99091e6b127cc75';\n                API_SECRET = '35edfd57203a7412d3b35ea5a2db918d720cb4e21d9a3e9e90ce4e41ea22d405'; // the endpoint needed to upload the file\n\n                url = \"https://api.pinata.cloud/pinning/pinFileToIPFS\";\n                _context.next = 27;\n                return axios.post(url, formData, {\n                  maxContentLength: \"Infinity\",\n                  headers: {\n                    'Content-Type': \"multipart/form-data; boundary=\".concat(formData._boundary),\n                    'pinata_api_key': API_KEY,\n                    'pinata_secret_api_key': API_SECRET\n                  }\n                });\n\n              case 27:\n                response = _context.sent;\n                console.log(response); // get the hash\n\n                this.setState({\n                  myipfsHash: response.data.IpfsHash\n                }); //setIPFSHASH(response.data.IpfsHash)\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[6, 10, 14, 22], [15,, 17, 21]]);\n      }));\n\n      function handleFile() {\n        return _handleFile.apply(this, arguments);\n      }\n\n      return handleFile;\n    }()\n  }]);\n\n  function Create(props) {\n    var _this;\n\n    _classCallCheck(this, Create);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Create).call(this, props));\n\n    _this.mint = function (ako) {\n      _this.state.contract.methods.mint(ako).send({\n        from: _this.state.account\n      }).once('receipt', function (receipt) {\n        _this.setState({\n          akos: [].concat(_toConsumableArray(_this.state.akos), [ako])\n        });\n      });\n    };\n\n    _this.state = {\n      account: '',\n      contract: null,\n      totalSupply: 0,\n      akos: [],\n      file: null,\n      myipfsHash: ''\n    };\n    return _this;\n  }\n\n  _createClass(Create, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"create \\uD398\\uC774\\uC9C0 \\uC785\\uB2C8\\uB2E4.\"), React.createElement(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        onChange: function onChange(event) {\n          event.preventDefault();\n          var fobj = event.target.files[0];\n\n          _this2.setState({\n            file: fobj\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.handleFile();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Pin\"));\n    }\n  }]);\n\n  return Create;\n}(Component);\n\nexport default Create;","map":{"version":3,"sources":["C:\\Users\\YKB\\Desktop\\AKO_nft\\src\\components\\pages\\Create.js"],"names":["React","Component","axios","FormData","Create","console","log","formData","append","state","file","values","value","API_KEY","API_SECRET","url","post","maxContentLength","headers","_boundary","response","setState","myipfsHash","data","IpfsHash","props","mint","ako","contract","methods","send","from","account","once","receipt","akos","totalSupply","event","preventDefault","fobj","target","files","handleFile"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport FormData from 'form-data';\r\n\r\nclass Create extends Component {\r\n \r\n    async handleFile() {\r\n      console.log('starting')\r\n  \r\n      // initialize the form data\r\n      const formData = new FormData()\r\n  \r\n      // append the file form data to \r\n      formData.append('file', this.state.file)\r\n  \r\n      //formData value 확인\r\n      for (var value of formData.values()) {\r\n        console.log(value);\r\n      }\r\n  \r\n      // call the keys from .env\r\n      const API_KEY = '23f6b99091e6b127cc75'\r\n      const API_SECRET = '35edfd57203a7412d3b35ea5a2db918d720cb4e21d9a3e9e90ce4e41ea22d405'\r\n  \r\n      // the endpoint needed to upload the file\r\n      const url =  `https://api.pinata.cloud/pinning/pinFileToIPFS`\r\n  \r\n      const response = await axios.post(\r\n        url,\r\n        formData,\r\n        {\r\n            maxContentLength: \"Infinity\",\r\n            headers: {\r\n              'Content-Type': `multipart/form-data; boundary=${formData._boundary}`, \r\n                'pinata_api_key': API_KEY,\r\n                'pinata_secret_api_key': API_SECRET\r\n            }\r\n        }\r\n    )\r\n  \r\n    console.log(response)\r\n  \r\n    // get the hash\r\n    this.setState({myipfsHash: response.data.IpfsHash})\r\n    //setIPFSHASH(response.data.IpfsHash)\r\n    \r\n    }\r\n  \r\n    mint = (ako) => {\r\n      this.state.contract.methods.mint(ako).send({ from: this.state.account })\r\n      .once('receipt', (receipt) => {\r\n        this.setState({\r\n          akos: [...this.state.akos, ako]\r\n        })\r\n      })\r\n    }\r\n  \r\n    constructor(props) {\r\n      super(props)\r\n      this.state = {\r\n        account: '',\r\n        contract: null,\r\n        totalSupply: 0,\r\n        akos: [],\r\n        file: null,\r\n        myipfsHash: ''\r\n      }\r\n    }\r\n  \r\n    render() {\r\n      return(\r\n          <div>\r\n              <h1>create 페이지 입니다.</h1>\r\n          <input type=\"file\" name=\"file\" onChange={(event)=> {\r\n            event.preventDefault()\r\n            const fobj=event.target.files[0]\r\n            this.setState({ file: fobj })}}/>\r\n          <button onClick={()=>this.handleFile()}>Pin</button>\r\n          </div>\r\n          \r\n\r\n\r\n      );\r\n    }\r\n  }\r\n\r\nexport default Create;"]},"metadata":{},"sourceType":"module"}